<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>测试蓝牙</title>
      <script src="js/jquery-1.8.0.min.js"></script>
      <link href="css/main.css" rel="stylesheet">
    <script>
        
    
        $(function() {
         
          
            //设置默认页面
            //点击商品添加到购物车
                $(".goodsItem").click(function() {
                //var num = parseInt($("#cartNums").text());
                //$("#cartNums").text(num+1);
                var itemName = $(this).children("img")[0].alt;
                var message = {"method":"addToCarCheck","name":itemName}
                window.webkit.messageHandlers.interOp.postMessage(message)
            });
        });
        function handleStartScan(){
            var message = {"method":"handleStartScan","name":""}
            window.webkit.messageHandlers.interOp.postMessage(message)
        }
        function handleStopScan(){
            var message = {"method":"handleStopScan","name":""}
            window.webkit.messageHandlers.interOp.postMessage(message)
        }
         //1、
            function handleConnect(){
             var message = {"method":"handleConnect","keyName":"663E99B6-39F0-CD53-CF0C-BEB6CA13B875"}
             window.webkit.messageHandlers.interOp.postMessage(message)
            }
        function handleDisConnect(){
            var message = {"method":"handleDisConnect","name":""}
            window.webkit.messageHandlers.interOp.postMessage(message)
        }
        function handleSendData(){
            var message = {"method":"handleSendData","sendDt":"DADADA"}
            window.webkit.messageHandlers.interOp.postMessage(message)
        }
        function handleReadData(){
            var message = {"method":"handleReadData","name":""}
            window.webkit.messageHandlers.interOp.postMessage(message)
        }
        //接收消息
        function handBleListToHtml5(dataString){
            
            
            //这里只是简单的给数量+1,用来演示
                var num = parseInt($("#cartNums").text());
                $("#cartNums").text(num+1);
                 $("#msgString").text(dataString);
        }
        //接收消息
        function sendToHtmlBleState(dataString){
            //这里只是简单的给数量+1,用来演示
            $("#bleState").text(dataString);
        }
        //接收消息
        function broastCameraScanRst(dataString){
            //这里只是简单的给数量+1,用来演示
            $("#broastCameraScanRst").text(dataString);
        }
        function addToCard(){
            
            var message = {"method":"addToCarCheck","name":"假数据"}
            window.webkit.messageHandlers.interOp.postMessage(message)
        }
        //添加到购物车
        function addToCar(itemName){
            //这里只是简单的给数量+1,用来演示
            var num = parseInt($("#cartNums").text());
            $("#cartNums").text(num+1);
        }
        function bleNameFuction(name){
            //这里只是简单的给数量+1,用来演示
           
            $("#nametext").text(name);
        }
        function handleMultiParamsResponse(name){
                   //这里只是简单的给数量+1,用来演示
                  
                   $("#nametext22").text(name);
               }
        function sendMsgToIos(fucName,keyName,valueName){
            var message = {"method":fucName,"keyName":keyName,"valueName":valueName}
            window.webkit.messageHandlers.interOp.postMessage(message)
        }
        function handleMultiParams(params1,params2){
                  var message = {"method":'handleMultiParams',"params1":params1,"params2":params2}
                  window.webkit.messageHandlers.interOp.postMessage(message)
              }
       var num =1;
       function  testCirclePost(){
           if(num<20){
               var message = {"method":"testCirclePost11","sendDt":'da000011'}
                              window.webkit.messageHandlers.interOp.postMessage(message)
                              num++;
                              testCirclePost()
           }else{
               num=1;
           }
              
        }
    </script>
</head>
<body>
    <!-- 点击事件 -->
    <input />
    <!-- 页面头部，使用绝对定位 -->
    <header id="pageHead">
        <section>
            <h1 style="float: left;color: #ffffff;">今日推荐</h1>
            <div id="cart">
                <img  src="img/gwc4.png" /><span id="cartNums">0</span>
            </div>
            
            <div class="clear"/>
        </section>
        <nav>
            <ul>
                <li class="onSelected"><a href="#" onclick="handleStartScan()">开始扫描</a></li>
                <li class="onSelected"><a href="#" onclick="handleStopScan()">停止扫描</a></li>
                <li class="onSelected"><a href="#" onclick="handleConnect()">连接</a></li>
                <li class="onSelected"><a href="#" onclick="handleMultiParams('11','pagefrom11')">多参数传递</a></li>
                <li><a href="#" onclick="handleDisConnect()">断开连接</a></li>
                <li><a href="#" onclick="handleSendData()">发送数据</a></li>
                <li><a href="#" onclick="handleReadData()">读取数据</a></li>
                <li><a href="#" onclick="addToCard()">加入购物车</a></li>
                <li><a href="#" onclick="sendMsgToIos('handleGetBleState')">获取连接状态</a></li>
                <li><a href="#" onclick="sendMsgToIos('handleOpenIosScan')">打开二维码扫描</a></li>
                 <li><a href="#" onclick="sendMsgToIos('handSaveWrite','bleName','HC-08')">存储数据</a></li>
                 <li><a href="#" onclick="sendMsgToIos('handSaveWrite','bleNameFuction','{[ssss]}')">存储数据bleNameFuction</a></li>
                  <li><a href="#" onclick="sendMsgToIos('handSaveRead','bleName')">读取存储的数据</a></li>
                  <li><a href="#" onclick="sendMsgToIos('handSaveReadByFuction','bleNameFuction')">读取的数据根据方法直接返回bleNameFuction</a></li>
                  <li><a href="#" onclick="sendMsgToIos('handOpenWeb','http://www.wtl.com.cn/')">打开网页</a></li>
                  <li><a href="#" onclick="testCirclePost()">循环请求</a></li>
                <li id="msgString">我勒个去</li>
                <li id="bleState">连接状态</li>
                <li id="broastCameraScanRst">扫描结果</li>
                <li id="nametext">zhi</li>
                <li id="nametext22">多参数</li>
                <div class="clear"/>
            </ul>
        </nav>
    </header>
    <ul>
       
    </ul>
</body>
</html>

